@page "/"

<div class="text-center">
    <h1 class="display-4">Guest Book</h1>
    <ul id="guest-list">
        @foreach (Guest guest in Guests)
        {
            // List doesn't appear after being input on NewEntry.razor
            <li><b>@guest.GuestDateTime</b> - @guest.GuestName - @guest.GuestMessage</li>
        }
    </ul>

    <button class="btn btn-primary" @onclick="@(()=>ShowNewEntry())">Add Entry</button>

    <p>Thank you for sharing this special day!</p>
</div>

@code {
        private List<Guest> Guests = new List<Guest>();

        [CascadingParameter] public IModalService Modal { get; set; }

        async Task ShowNewEntry()
        {
            var formModal = Modal.Show<NewEntry>("New Entry");
            var result = await formModal.Result;

            if (result.Cancelled)
            {
                Console.WriteLine("Modal was cancelled.");
            }
            else
            {
                foreach (Guest guest in Guests)
                {
                    Guests.Add(new Guest() 
                    {
                        GuestName = guest.GuestName,
                        GuestMessage = guest.GuestMessage,
                        GuestDateTime = guest.GuestDateTime
                    });
            }
        }
    }
}