@page "/NewEntry"

<div id="entry-modal">
    <div class="table-row">
        <label for="name">Name:</label>
        <input type="text" placeholder="Enter your name" @bind="Name"/>
    </div>
    <div>
        <label for="message">Message:</label>
        <textarea type="text" placeholder="Enter your message" @bind="Message"></textarea>
    </div>
    <div>
        <button class="btn btn-primary" @onclick="AddEntry">Submit</button>
    </div>
</div>

@code {
        
        [CascadingParameter] BlazoredModalInstance BlazoredModal { get; set;}

        public List<Guest> Guests = new List<Guest>();

        bool ShowForm { get; set; } = true;
        public string Name { get; set; }
        public string Message { get; set; }
        
        public void AddEntry()
        {
            Guest newGuest = new Guest();           // This chunk works to display the info on console,
            newGuest.GuestName = Name;                // but doesn't actually update the list
            newGuest.GuestMessage = Message;
            newGuest.GuestDateTime = DateTime.Now;
            Guests.Add(newGuest);
            Console.WriteLine(Guests.Count);
            BlazoredModal.Close(ModalResult.Ok($"{newGuest.GuestDateTime} - {newGuest.GuestName}: {newGuest.GuestMessage}"));

            //Guests.Add(new Guest()
            //{ GuestName=Name, GuestMessage=Message, GuestDateTime=DateTime.Now }); //This chunk isn't showing anything presently
            //Console.WriteLine(Guests.Count);
            //BlazoredModal.Close();//ModalResult.Ok($"{newGuest.GuestDateTime} - {newGuest.GuestName}: {newGuest.GuestMessage}"));           
        }
}